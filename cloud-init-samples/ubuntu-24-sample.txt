Content-Type: multipart/mixed; boundary="===============BOUNDARY=="
MIME-Version: 1.0

--===============BOUNDARY==
Content-Type: text/cloud-config; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="user-data"

#cloud-config

hostname: VM-1

users:
  - name: myuser
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    ssh-authorized-keys:
      - <enter public key>

chpasswd:
  list: |
    myuser:P@ssword123
  expire: false

package_update: true
package_upgrade: true
packages:
  - traceroute

write_files:
  - path: /etc/ssh/sshd_config
    content: |
      # Cloud-init modified SSH configuration
      PasswordAuthentication yes

runcmd:
  - systemctl enable ssh
  - systemctl start ssh

--===============BOUNDARY==
Content-Type: text/plain; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="meta-data"

instance-id: TEST-VM1
local-hostname: TEST-VM1

--===============BOUNDARY==
Content-Type: text/network-config; charset="us-ascii"
MIME-Version: 1.0
Content-Transfer-Encoding: 7bit
Content-Disposition: attachment; filename="network-config"

version: 2
ethernets:
  enp1s0:
    dhcp4: true

--===============BOUNDARY==--